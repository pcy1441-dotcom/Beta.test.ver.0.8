<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MURDER MYSTERY - PINEAPPLE BETA</title>
<style>
  :root {
    --bg-color: #050505;
    --accent-red: #cc0000;
    --gold: #D4AF37;
    --pine-yellow: #f4d03f;
  }

  body { 
    font-family: 'Segoe UI', sans-serif; background: var(--bg-color);
    margin: 0; padding: 0; text-align: center; color: #e0e0e0; 
    overflow-x: hidden;
  }

  /* --- CAUTION ë  ì• ë‹ˆë©”ì´ì…˜ --- */
  .ticker-wrap {
    width: 100%; overflow: hidden; background: #f4d03f; color: #000;
    padding: 5px 0; font-weight: 900; font-size: 14px; position: fixed; z-index: 10;
  }
  .ticker-top { top: 0; }
  .ticker-bottom { bottom: 0; }
  .ticker {
    display: inline-block; white-space: nowrap; animation: ticker 20s linear infinite;
  }
  @keyframes ticker {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  /* --- ë©”ì¸ ë ˆì´ì•„ì›ƒ --- */
  .content-wrapper {
    min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
    padding: 50px 20px; box-sizing: border-box;
  }

  #menu, #draw-area { 
    background: rgba(20, 20, 20, 0.95); padding: 40px; border-radius: 20px; 
    border: 1px solid #333; box-shadow: 0 0 30px rgba(0,0,0,1); width: 100%; max-width: 400px;
  }

  /* --- ë²„íŠ¼ ë° ìŠ¤ìœ„ì¹˜ --- */
  .main-btn {
    background: #222; color: #fff; border: 1px solid #444; padding: 15px 40px;
    border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.3s;
  }
  .main-btn:hover { background: #333; border-color: var(--pine-yellow); }
  
  .switch { position: relative; display: inline-block; width: 44px; height: 20px; vertical-align: middle; }
  .switch input { opacity: 0; width: 0; height: 0; }
  .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #444; transition: .4s; border-radius: 20px; }
  .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
  input:checked + .slider { background-color: var(--accent-red); }
  input:checked + .slider:before { transform: translateX(24px); }

  /* --- ê²°ê³¼ ì¹´ë“œ --- */
  #result { 
    display: none; background: #f5f5f5; color: #111; padding: 40px 20px; 
    border-radius: 25px; width: 100%; max-width: 380px; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
  }
  #role { font-size: 48px; font-weight: 900; margin-bottom: 10px; }
  #skill { font-size: 36px; font-weight: bold; margin: 15px 0; }
  
  /* --- ëŠ¥ë ¥ë³„ íŠ¹ìˆ˜ ìƒ‰ìƒ --- */
  .skill-gunslinger { background: linear-gradient(45deg, #FF1801, #3712FF); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .skill-yellow { color: #b8860b; text-shadow: 1px 1px 0px #fff; } 
  .skill-pink { color: #FB66FF; }

  /* --- í•˜ë‹¨ ìŠ¤í¬ë¡¤ ì„¹ì…˜ --- */
  .bottom-info {
    background: #111; padding: 80px 20px; border-top: 1px dashed #333; width: 100%;
  }
  .pine-logo { font-size: 50px; margin-bottom: 20px; }
  .data-box { 
    text-align: left; max-width: 500px; margin: 0 auto; color: #888; font-family: monospace;
    background: #000; padding: 20px; border: 1px solid #222;
  }

  /* --- ìµœì¢… í™”ë©´ --- */
  #final-screen { display: none; background: #000; padding: 100px 20px; width: 100%; height: 100vh; box-sizing: border-box; }
  .type-standard { color: var(--accent-red); }
  .type-zombie { color: #32CD32; }
  .type-chillsear { color: #fff; text-shadow: 0 0 15px #87CEEB; }
</style>
</head>
<body>

<div class="ticker-wrap ticker-top">
  <div class="ticker">
    CAUTION ğŸ DANGER ğŸ PINEAPPLE INC. ğŸ DO NOT CROSS ğŸ CAUTION ğŸ DANGER ğŸ PINEAPPLE INC. ğŸ DO NOT CROSS ğŸ
  </div>
</div>

<div class="content-wrapper">
  <h1 style="color:#222; letter-spacing:10px; margin-bottom:40px;">PINEAPPLE BETA</h1>

  <div id="menu">
    <div style="margin-bottom:20px;">
      <span style="font-size: 13px; color: #777;">ëŠ¥ë ¥/íƒ€ì… í™œì„±í™”</span>
      <label class="switch"><input type="checkbox" id="useSkills" checked><span class="slider"></span></label>
    </div>
    <label>ì¸ì› ìˆ˜ : <input type="number" id="playerCount" min="4" max="20" value="6" style="background:#222; border:1px solid #444; color:#fff; padding:5px; border-radius:5px; width:50px;"></label><br>
    <button onclick="startGame()" class="main-btn" style="margin-top:30px; width:100%;">GAME START</button>
  </div>

  <div id="draw-area" style="display:none;">
    <div id="playerNum" style="font-size: 28px; margin-bottom: 25px; color: #666;"></div>
    <button onclick="draw()" class="main-btn" style="background:var(--accent-red); border:none; width:100%;">ì—­í•  í™•ì¸</button>
  </div>

  <div id="result">
    <div id="role"></div>
    <div id="skill"></div>
    <div id="desc" style="font-size:18px; color:#666; margin-bottom:30px; line-height:1.4;"></div>
    <button onclick="nextPlayer()" style="background:#000; color:#fff; width:100%; padding:15px; border-radius:12px; border:none; font-weight:bold;">í™•ì¸ ì™„ë£Œ</button>
  </div>

  <div id="final-screen">
    <div style="color: #666; font-size: 20px; margin-bottom: 25px;">ì´ë²ˆ ë¼ìš´ë“œ í‚¬ëŸ¬ëŠ”...</div>
    <div id="finalType" style="font-size:70px; font-weight:900; margin-bottom:20px;"></div>
    <div id="finalDetail" style="font-size: 22px; color: #444; font-weight:bold;"></div>
    <br><br>
    <button onclick="location.reload()" style="background:none; border:1px solid #333; color:#333; padding:10px 20px; cursor:pointer;">REBOOT SYSTEM</button>
  </div>
</div>

<div class="bottom-info">
  <div class="pine-logo">ğŸ</div>
  <h2 style="color:var(--pine-yellow);">PINEAPPLE DATABASE</h2>
  <div class="data-box">
    > ACCESS GRANTED...<br>
    > SUBJECT: MURDER CASE #2024<br>
    > STATUS: ENCRYPTED<br><br>
    [SYSTEM GUIDE]<br>
    - ì‹œë¯¼: ì¥ì£½ì€ ë“¯ì´ ìˆ¨ìœ¼ì‹­ì‹œì˜¤. ìµœëŒ€ 2ëª…ë§Œì´ íŠ¹ë³„í•œ í˜ì„ ê°€ì§‘ë‹ˆë‹¤.<br>
    - ë³´ì•ˆê´€/ì˜ì‚¬: ë‹¹ì‹ ë“¤ì˜ ë¬´ëŠ¥í•¨ì€ íŒ€ì˜ íŒ¨ë°°ë¥¼ ë¶€ë¦…ë‹ˆë‹¤.<br>
    - íŒŒì¸ì• í”Œ ì•ŒëŸ¬ì§€ ì£¼ì˜.
  </div>
</div>

<div class="ticker-wrap ticker-bottom">
  <div class="ticker">
    ğŸ SYSTEM ONLINE ğŸ PINEAPPLE HQ ğŸ WATCH YOUR BACK ğŸ SYSTEM ONLINE ğŸ PINEAPPLE HQ ğŸ WATCH YOUR BACK ğŸ
  </div>
</div>

<script>
const skillData = {
  ë¨¸ë”: [
    { name: "ë°©íƒ„", desc: "í•œ ë²ˆ ê³µê²©ì„ ë²„íŒë‹ˆë‹¤. (2ëª©ìˆ¨)ì…ë‹ˆë‹¤." },
    { name: "ê°€ë°©", desc: "ì£½ì¸ ëŒ€ìƒì´ ì‚´ì•„ìˆëŠ” ê²ƒì²˜ëŸ¼ í–‰ë™í•˜ë‹¤ê°€ ë§ˆì§€ë§‰ì— ì‚¬ë§í•©ë‹ˆë‹¤. (1ëª…)ì…ë‹ˆë‹¤." },
    { name: "ì´ì¡ì´", desc: "ë³´ì•ˆê´€ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì²˜ì¹˜í•©ë‹ˆë‹¤.", special: "gunslinger" }
  ],
  ë³´ì•ˆê´€: [
    { name: "ê°•ì¸í•œ", desc: "ëª©ìˆ¨ì´ 2ê°œê°€ ë©ë‹ˆë‹¤.ì…ë‹ˆë‹¤." },
    { name: "ë§ˆí”¼ì•„", desc: "ë¨¸ë”ì™€ ëª¨ë“  ì‹œë¯¼ì„ ì œê±°í•˜ë©´ ì¦‰ì‹œ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.", special: "yellow" }
  ],
  ì˜ì‚¬: [
    { name: "ìê°€ì¹˜ìœ ", desc: "ìì‹ ì„ ì¹˜ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1íšŒ)ì…ë‹ˆë‹¤." },
    { name: "ì „ë¬¸ ì˜ì‚¬", desc: "ìµœëŒ€ 2ëª…ê¹Œì§€ ì¹˜ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤." }
  ],
  ì‹œë¯¼: [
    { name: "ìŠ¤íŒŒì´", desc: "ì‹œë¯¼/ë³´ì•ˆê´€ì„ ì£½ì¼ìˆ˜ë¡ ìµœëŒ€ 2ëª©ìˆ¨ê¹Œì§€ ì¦ê°€í•©ë‹ˆë‹¤. ë¨¸ë”ë¥¼ ì£½ì´ë©´ ìì‹ ë„ ì‚¬ë§í•˜ë©° ì‹œë¯¼ ìŠ¹ë¦¬ì…ë‹ˆë‹¤.", special: "yellow" },
    { name: "í¼ë¸”win", desc: "ê°€ì¥ ë¨¼ì € ë¨¸ë”ì—ê²Œ ì£½ìœ¼ë©´ ì¦‰ì‹œ ì‹œë¯¼ ìŠ¹ë¦¬ì…ë‹ˆë‹¤.", special: "pink" },
    { name: "íŒ¨ë§", desc: "í•œ ë²ˆ ê³µê²©ì„ ë§‰ì•„ëƒ…ë‹ˆë‹¤.ì…ë‹ˆë‹¤." }
  ]
};

const murderTypes = [
  { name: "Standard", weight: 60, desc: "ì¶”ê°€ ëŠ¥ë ¥ì´ í¬í•¨ëœ ê¸°ë³¸ ë¼ìš´ë“œì…ë‹ˆë‹¤.", class: "type-standard" },
  { name: "Chillsear", weight: 30, desc: "ì˜ì‚¬ê°€ ì¹˜ë£Œí•  ìˆ˜ ì—†ëŠ” ë¬´ìë¹„í•œ ë¼ìš´ë“œì…ë‹ˆë‹¤.", class: "type-chillsear" },
  { name: "Zombie", weight: 10, desc: "ì£½ì€ ìë“¤ì´ ì¢€ë¹„ê°€ ë˜ëŠ” ê°ì—¼ ë¼ìš´ë“œì…ë‹ˆë‹¤.", class: "type-zombie" }
];

let totalPlayers, current, roles, roundMurderType, useSkills, assignedSkills;

function startGame() {
  totalPlayers = parseInt(document.getElementById("playerCount").value);
  useSkills = document.getElementById("useSkills").checked;
  
  roles = ["ë¨¸ë”", "ë³´ì•ˆê´€", "ì˜ì‚¬"];
  for (let i = 4; i <= totalPlayers; i++) roles.push("ì‹œë¯¼");
  roles.sort(() => Math.random() - 0.5);

  const pool = {
    ë¨¸ë”: [...skillData.ë¨¸ë”].sort(() => Math.random() - 0.5),
    ë³´ì•ˆê´€: [...skillData.ë³´ì•ˆê´€].sort(() => Math.random() - 0.5),
    ì˜ì‚¬: [...skillData.ì˜ì‚¬].sort(() => Math.random() - 0.5),
    ì‹œë¯¼: [...skillData.ì‹œë¯¼].sort(() => Math.random() - 0.5)
  };

  let citizenIndices = [];
  roles.forEach((r, i) => { if(r === "ì‹œë¯¼") citizenIndices.push(i); });
  citizenIndices.sort(() => Math.random() - 0.5);
  let luckyOnes = citizenIndices.slice(0, 2);

  assignedSkills = roles.map((role, idx) => {
    if (!useSkills) return { name: "ë¬´ëŠ¥ë ¥", desc: "ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤." };
    if (role === "ë¨¸ë”") return null; 
    if (role === "ì‹œë¯¼") {
      if (luckyOnes.includes(idx) && pool.ì‹œë¯¼.length > 0) return pool.ì‹œë¯¼.pop();
      return { name: "ë¬´ëŠ¥ë ¥", desc: "ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤." };
    }
    return pool[role].length > 0 ? pool[role].pop() : { name: "ë¬´ëŠ¥ë ¥", desc: "ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤." };
  });

  const rand = Math.random() * 100;
  let cum = 0;
  for (const t of murderTypes) { cum += t.weight; if (rand < cum) { roundMurderType = t; break; } }
  
  const mIdx = roles.indexOf("ë¨¸ë”");
  if (!useSkills) {
      assignedSkills[mIdx] = { name: "ë¬´ëŠ¥ë ¥", desc: "ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤." };
  } else {
      assignedSkills[mIdx] = (roundMurderType.name === "Standard" && pool.ë¨¸ë”.length > 0) ? pool.ë¨¸ë”.pop() : { name: "SPECIAL TYPE", desc: "íŠ¹ìˆ˜ íƒ€ì…ì…ë‹ˆë‹¤. ì •ì²´ëŠ” ë§ˆì§€ë§‰ì— ê³µê°œë©ë‹ˆë‹¤." };
  }

  current = 0;
  document.getElementById("menu").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("playerNum").textContent = `PLAYER 1`;
  window.scrollTo(0, 0);
}

function draw() {
  const role = roles[current];
  const chosen = assignedSkills[current];
  const rDiv = document.getElementById("role");
  const sDiv = document.getElementById("skill");
  rDiv.textContent = role;
  rDiv.style.color = role === "ë¨¸ë”" ? "#cc0000" : role === "ë³´ì•ˆê´€" ? "#2b57ff" : role === "ì˜ì‚¬" ? "#28a745" : "#666";
  sDiv.textContent = chosen.name;
  sDiv.className = chosen.special === "gunslinger" ? "skill-gunslinger" : chosen.special === "yellow" ? "skill-yellow" : chosen.special === "pink" ? "skill-pink" : "";
  document.getElementById("desc").textContent = chosen.desc;
  document.getElementById("draw-area").style.display = "none";
  document.getElementById("result").style.display = "block";
}

function nextPlayer() {
  current++;
  if (current >= totalPlayers) {
    if (useSkills) {
      document.getElementById("result").style.display = "none";
      document.getElementById("final-screen").style.display = "block";
      const tElt = document.getElementById("finalType");
      tElt.textContent = roundMurderType.name;
      tElt.className = roundMurderType.class;
      document.getElementById("finalDetail").textContent = roundMurderType.desc;
      if ("vibrate" in navigator) navigator.vibrate(200);
    } else { location.reload(); }
    return;
  }
  document.getElementById("result").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("playerNum").textContent = `PLAYER ${current + 1}`;
}
</script>
</body>
</html>
